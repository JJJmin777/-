<link rel="stylesheet" href="/stylesheets/profileshow.css">

<div class="main-container">
    <!-- Profile Section -->
    <div class="profile-container">
        <div class="profile-header">
            <img src="<%= user.profilePicture || '/images/default-profile.png' %>" alt="Profile Picture" class="profile-picture">
            <div class="profile-info">
                <h2><%= user.username %>'s Profile</h2>
                <p><strong>Email:</strong> <%= user.email %></p>
                <p><strong>Bio:</strong> <%= user.bio || 'No bio yet.' %></p>
                <% if (currentUser && currentUser._id.toString() === user._id.toString()) { %>
                    <a href="/profile/<%= user._id %>/edit" class="btn btn-primary">Edit Profile</a>
                <% } %>
            </div>
        </div>
    </div>

    <!-- Review Section -->
    <div id="review-section" class="review-container">
        <% if (reviews.length > 0) { %>
                <% reviews.forEach(review => { %>
                    <div class="review-card" data-id="<%= review._id%>">
                        <img src="<%= review.book.image %>" alt="Book Image" class="book-image">
                        <div class="review-content">
                            <a href="/books/<%= review.book._id %>"><h3><%= review.book.title %></h3></a>
                            <p class="author"><%= review.book.author %></p>
                            <p><strong>Rating:</strong> <%= review.rating %>/5 ‚≠ê</p>
                            <p class="review-body"><strong>Review:</strong> <%= review.body %></p>
                            <button class="toggle-button">Read More</button>
                            <p class="review-date">Reviewed on: <%= review.createdAt.toLocaleDateString() %></p>
                        </div>
                    </div>
                <% }); %>
        <% } else { %>
            <div class="empty-state">
                <p>Any reviews yet. üìö</p>
            </div>
        <% } %>
    </div>
    <button id="load-more-btn" class="btn btn-primary" data-user-id="<%= userId %>">Load More Reviews</button>
</div>

<script type="module" src="/javascripts/reviewtoggle.js"></script>
<script type="module" src="/javascripts/infiniteScroll.js"></script>