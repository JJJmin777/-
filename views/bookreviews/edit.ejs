<link rel="stylesheet" href="/stylesheets/editreview.css">
<link rel="stylesheet" href="/stylesheets/stars.css">

<div class="container mt-4">
    <div class="row">
        <!-- 왼쪽: 책 이미지와 소개 -->
        <div class="col-md-4">
            <div class="book-info-card card">
                <img src="<%= review.book.image %>" alt="<%= review.book.title %>" class="card-img-top">
                <h5 class="card-title"><%= review.book.title %></h5>
                <p class="card-text"><strong>Author:</strong> <%= review.book.author %></p>
                <p class="card-text"><strong>Publisher:</strong> <%= review.book.publisher %></p>
                <p class="card-text"><strong>Price:</strong> ₩<%= review.book.price %></p>
            </div>
        </div>

        <!-- 오른쪽: 리뷰 편집 폼 -->
        <div class="col-md-8">
            <div class="card p-4 shadow-sm">
                <h2 class="card-title text-center mb-4">Edit Your Review</h2>

                <form action="/books/<%= review.book._id %>/reviews/<%= review._id %>?_method=PUT" method="POST">
                    <!-- 별점 선택 -->
                    <fieldset class="rating mb-3">
                        <div class="rate">
                            <input id="rate2-star5" type="radio" name="review[rating]" value="5" <%= review.rating === 5 ? 'checked' : '' %> />
                            <label for="rate2-star5" title="Awesome">5</label>
                            <input id="rate2-star5-half" type="radio" name="review[rating]" value="4.5" <%= review.rating === 4.5 ? 'checked' : '' %> />
                            <label class="star-half" for="rate2-star5-half" title="Excellent">4.5</label>
                            <input id="rate2-star4" type="radio" name="review[rating]" value="4" <%= review.rating === 4 ? 'checked' : '' %> />
                            <label for="rate2-star4" title="Very good">4</label>
                            <input id="rate2-star3-half" type="radio" name="review[rating]" value="3.5" <%= review.rating === 3.5 ? 'checked' : '' %> />
                            <label class="star-half" for="rate2-star3-half" title="Good">3.5</label>
                            <input id="rate2-star3" type="radio" name="review[rating]" value="3" <%= review.rating === 3 ? 'checked' : '' %> />
                            <label for="rate2-star3" title="Satisfactory">3</label>
                            <input id="rate2-star2-half" type="radio" name="review[rating]" value="2.5" <%= review.rating === 2.5 ? 'checked' : '' %> />
                            <label class="star-half" for="rate2-star2-half" title="Unsatisfactory">2.5</label>
                            <input id="rate2-star2" type="radio" name="review[rating]" value="2" <%= review.rating === 2 ? 'checked' : '' %> />
                            <label for="rate2-star2" title="Bad">2</label>
                            <input id="rate2-star1-half" type="radio" name="review[rating]" value="1.5" <%= review.rating === 1.5 ? 'checked' : '' %> />
                            <label class="star-half" for="rate2-star1-half" title="Very bad">1.5</label>
                            <input id="rate2-star1" type="radio" name="review[rating]" value="1" <%= review.rating === 1 ? 'checked' : '' %> />
                            <label for="rate2-star1" title="Awful">1</label>
                            <input id="rate2-star0-half" type="radio" name="review[rating]" value="0.5" <%= review.rating === 0.5 ? 'checked' : '' %> />
                            <label class="star-half" for="rate2-star0-half" title="Horrific">0.5</label>
                        </div>
                    </fieldset>

                    <!-- 리뷰 텍스트 -->
                    <div class="mb-3">
                        <label for="body" class="form-label">Review Text</label>
                        <textarea name="review[body]" id="body" class="form-control" rows="5" required><%= review.body %></textarea>
                    </div>

                    <!-- 버튼 -->
                    <div class="d-flex justify-content-between">
                        <button type="submit" class="btn btn-success">Update</button>
                        <a href="/mybooks" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
